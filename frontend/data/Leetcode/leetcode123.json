{
  "ID": "leetcode123",
  "coding_practice": [
    {
      "title": "Best Time to Buy and Sell Stock III",
      "description": "You are given an array prices where prices[i] is the price of a given stock on the i^th day.\n\nFind the maximum profit you can achieve. You may complete at most two transactions.\n\nNote: You may not engage in multiple transactions simultaneously (i.e., you must sell the stock before you buy again).",
      "examples": [
        {
          "input": "prices = [3,3,5,0,0,3,1,4]",
          "output": "6",
          "explanation": "Buy on day 4 (price = 0) and sell on day 6 (price = 3), profit = 3-0 = 3. Then buy on day 7 (price = 1) and sell on day 8 (price = 4), profit = 4-1 = 3."
        },
        {
          "input": "prices = [1,2,3,4,5]",
          "output": "4",
          "explanation": "Buy on day 1 (price = 1) and sell on day 5 (price = 5), profit = 4. Note that you cannot buy on day 1, buy on day 2 and sell them later, as you are engaging multiple transactions at the same time. You must sell before buying again."
        },
        {
          "input": "prices = [7,6,4,3,1]",
          "output": "0",
          "explanation": "In this case, no transaction is done, i.e. max profit = 0."
        }
      ],
      "constraints": "1 <= prices.length <= 10^5\n0 <= prices[i] <= 10^5",
      "solution": "class Solution:\n    def maxProfit(self, prices):\n        if not prices:\n            return 0\n        buy1 = float('-inf')\n        sell1 = 0\n        buy2 = float('-inf')\n        sell2 = 0\n        for price in prices:\n            buy1 = max(buy1, -price)\n            sell1 = max(sell1, buy1 + price)\n            buy2 = max(buy2, sell1 - price)\n            sell2 = max(sell2, buy2 + price)\n        return sell2",
      "explanation": "1. 維護四個狀態：buy1（第一次買入最大收益）、sell1（第一次賣出最大收益）、buy2（第二次買入最大收益，扣除第一次收益）、sell2（第二次賣出最大收益）。\n2. 遍歷價格，每天更新這四個狀態，確保每次交易符合「先賣後買」規則。\n3. 最後 sell2 即為最多兩筆交易的最大利潤。",
      "tag": "611",
      "difficult": "medium"
    }
  ]
}
