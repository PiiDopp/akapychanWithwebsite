{
  "ID": "leetcode303",
  "coding_practice": [
    {
      "title": "Range Sum Query - Immutable",
      "description": "Given an integer array nums, handle multiple queries of the following type:\n\nCalculate the sum of the elements of nums between indices left and right inclusive where left <= right.\nImplement the NumArray class:\n\nNumArray(int[] nums) Initializes the object with the integer array nums.\nint sumRange(int left, int right) Returns the sum of the elements of nums between indices left and right inclusive (i.e. nums[left] + nums[left + 1] + ... + nums[right]).",
      "examples": [
        {
          "input": "[\"NumArray\", \"sumRange\", \"sumRange\", \"sumRange\"], [[[-2, 0, 3, -5, 2, -1]], [0, 2], [2, 5], [0, 5]]",
          "output": "[null, 1, -1, -3]",
          "explanation": "NumArray numArray = new NumArray([-2, 0, 3, -5, 2, -1]);\nnumArray.sumRange(0, 2); // return (-2) + 0 + 3 = 1\nnumArray.sumRange(2, 5); // return 3 + (-5) + 2 + (-1) = -1\nnumArray.sumRange(0, 5); // return (-2) + 0 + 3 + (-5) + 2 + (-1) = -3"
        }
      ],
      "constraints": "1 <= nums.length <= 10^4\n-10^5 <= nums[i] <= 10^5\n0 <= left <= right < nums.length\nAt most 10^4 calls will be made to sumRange.",
      "solution": "class NumArray:\n\n    def __init__(self, nums):\n        # 建立前綴和陣列\n        self.prefix_sums = [0]\n        for num in nums:\n            self.prefix_sums.append(self.prefix_sums[-1] + num)\n\n    def sumRange(self, left, right):\n        # sumRange(left, right) = prefix_sums[right+1] - prefix_sums[left]\n        return self.prefix_sums[right + 1] - self.prefix_sums[left]",
      "explanation": "1. 在初始化時建立 prefix_sums 陣列，其中 prefix_sums[i] 表示 nums 前 i 個元素的總和。\n2. 計算 sumRange(left, right) 時，直接使用前綴和公式 prefix_sums[right+1] - prefix_sums[left]，可以在 O(1) 時間內完成查詢。\n3. 這樣在多次 sumRange 查詢下，效率非常高。",
      "tag": "611",
      "difficult": "easy"
    }
  ]
}
