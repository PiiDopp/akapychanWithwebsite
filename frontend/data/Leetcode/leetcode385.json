{
  "ID": "leetcode385",
  "coding_practice": [
    {
      "title": "Mini Parser",
      "description": "Given a string s represents the serialization of a nested list, implement a parser to deserialize it and return the deserialized NestedInteger.\n\nEach element is either an integer or a list whose elements may also be integers or other lists.",
      "examples": [
        {
          "input": "s = \"324\"",
          "output": "324",
          "explanation": "You should return a NestedInteger object which contains a single integer 324."
        },
        {
          "input": "s = \"[123,[456,[789]]]\"",
          "output": "[123,[456,[789]]]",
          "explanation": "Return a NestedInteger object containing a nested list with 2 elements:\n1. An integer containing value 123.\n2. A nested list containing two elements:\n    i.  An integer containing value 456.\n    ii. A nested list with one element:\n         a. An integer containing value 789"
        }
      ],
      "constraints": "1 <= s.length <= 5 * 10^4\ns consists of digits, square brackets \"[]\", negative sign '-', and commas ','.\ns is the serialization of valid NestedInteger.\nAll the values in the input are in the range [-10^6, 10^6].",
      "solution": "class Solution:\n    def deserialize(self, s):\n        if s[0] != '[':  # 單個整數\n            return NestedInteger(int(s))\n        \n        stack = []\n        num = ''\n        negative = False\n        \n        for c in s:\n            if c == '-':\n                negative = True\n            elif c.isdigit():\n                num += c\n            elif c == '[':\n                stack.append(NestedInteger())\n            elif c in ',]':\n                if num:\n                    value = int(num) if not negative else -int(num)\n                    stack[-1].add(NestedInteger(value))\n                    num = ''\n                    negative = False\n                if c == ']' and len(stack) > 1:\n                    ni = stack.pop()\n                    stack[-1].add(ni)\n        \n        return stack[0]",
      "explanation": "1. 若 s 不是以 '[' 開頭，代表它是一個單獨整數，直接返回 NestedInteger(int(s))。\n2. 使用 stack 追蹤嵌套結構，每遇到 '[' 新增一個 NestedInteger 到 stack。\n3. 收集連續的數字字元組成整數，遇到 ',' 或 ']' 則加入到當前 NestedInteger。\n4. 當遇到 ']' 且 stack 中有多個元素，將當前 NestedInteger pop 出並加入前一層。\n5. 最終 stack[0] 即為整個解析結果。",
      "tag": "711",
      "difficult": "medium"
    }
  ]
}
