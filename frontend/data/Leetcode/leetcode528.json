{
  "ID": "leetcode528",
  "coding_practice": [
    {
      "title": "Random Pick with Weight",
      "description": "You are given a 0-indexed array of positive integers w where w[i] describes the weight of the ith index.\n\nYou need to implement the function pickIndex(), which randomly picks an index in the range [0, w.length - 1] (inclusive) and returns it. The probability of picking an index i is w[i] / sum(w).\n\nFor example, if w = [1, 3], the probability of picking index 0 is 1 / (1 + 3) = 0.25 (i.e., 25%), and the probability of picking index 1 is 3 / (1 + 3) = 0.75 (i.e., 75%).",
      "examples": [
        {
          "input": "[\"Solution\",\"pickIndex\"], [[[1]],[]]",
          "output": "[null,0]",
          "explanation": "Solution solution = new Solution([1]);\nsolution.pickIndex(); // return 0. The only option is to return 0 since there is only one element in w."
        },
        {
          "input": "[\"Solution\",\"pickIndex\",\"pickIndex\",\"pickIndex\",\"pickIndex\",\"pickIndex\"], [[[1,3]],[],[],[],[],[]]",
          "output": "[null,1,1,1,1,0]",
          "explanation": "Solution solution = new Solution([1, 3]);\nsolution.pickIndex(); // return 1. It is returning the second element (index = 1) that has a probability of 3/4.\nsolution.pickIndex(); // return 1\nsolution.pickIndex(); // return 1\nsolution.pickIndex(); // return 1\nsolution.pickIndex(); // return 0. It is returning the first element (index = 0) that has a probability of 1/4.\n\nSince this is a randomization problem, multiple answers are allowed.\nAll of the following outputs can be considered correct:\n[null,1,1,1,1,0]\n[null,1,1,1,1,1]\n[null,1,1,1,0,0]\n[null,1,1,1,0,1]\n[null,1,0,1,0,0]\n......\nand so on."
        }
      ],
      "constraints": "1 <= w.length <= 10^4\n1 <= w[i] <= 10^5\npickIndex will be called at most 10^4 times.",
      "solution": "import random\nimport bisect\n\nclass Solution:\n    def __init__(self, w):\n        self.prefix_sum = []\n        total = 0\n        for weight in w:\n            total += weight\n            self.prefix_sum.append(total)\n        self.total = total\n\n    def pickIndex(self):\n        target = random.randint(1, self.total)\n        return bisect.bisect_left(self.prefix_sum, target)",
      "explanation": "1. 使用 prefix_sum 保存權重的前綴和，便於計算累積概率。\n2. 隨機生成一個 1 到 sum(w) 的整數 target。\n3. 使用二分搜尋找到 prefix_sum 中第一個 >= target 的索引，即為選中的 index。\n4. 這樣可保證每個 index 被選中的概率正比於其權重 w[i]。",
      "tag": "721",
      "difficult": "medium"
    }
  ]
}
