{
  "ID": "leetcode920",
  "coding_practice": [
    {
      "title": "Number of Music Playlists",
      "description": "Your music player contains n different songs. You want to listen to goal songs (not necessarily different) during your trip.\nTo avoid boredom, you will create a playlist so that:\nEvery song is played at least once.\nA song can only be played again only if k other songs have been played.\n\nGiven n, goal, and k, return the number of possible playlists that you can create. Since the answer can be very large, return it modulo 10^9 + 7.",
      "examples": [
        {
          "input": "n = 3, goal = 3, k = 1",
          "output": "6",
          "explanation": "There are 6 possible playlists: [1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], and [3, 2, 1]."
        },
        {
          "input": "n = 2, goal = 3, k = 0",
          "output": "6",
          "explanation": "There are 6 possible playlists: [1, 1, 2], [1, 2, 1], [2, 1, 1], [2, 2, 1], [2, 1, 2], and [1, 2, 2]."
        },
        {
          "input": "n = 2, goal = 3, k = 1",
          "output": "2",
          "explanation": "There are 2 possible playlists: [1, 2, 1] and [2, 1, 2]."
        }
      ],
      "constraints": "0 <= k < n <= goal <= 100",
      "solution": "class Solution(object):\n    def numMusicPlaylists(self, N, L, K):\n        MOD = 10**9 + 7\n        dp = [[0] * (N+1) for _ in range(L+1)]\n        dp[0][0] = 1\n        for i in range(1, L+1):\n            for j in range(1, N+1):\n                dp[i][j] += dp[i-1][j-1] * (N - (j-1))\n                if j > K:\n                    dp[i][j] += dp[i-1][j] * (j - K)\n                dp[i][j] %= MOD\n        return dp[L][N]",
      "explanation": "1. 使用 dp[i][j] 表示播放 i 首歌且有 j 首不同歌的播放方式數量。\n2. 對於每一首新歌，如果還未播放過，就可以加入新歌的情況 dp[i-1][j-1] * (N - (j-1))。\n3. 對於已經播放過的歌，如果與最近播放的 K 首歌不同，就可以再次播放 dp[i-1][j] * (j - K)。\n4. 對每一個狀態取模 10^9+7 避免溢位。\n5. 最終答案為 dp[goal][n]，即播放 goal 首歌且每首歌至少播放一次的方式數。",
      "tag": "721",
      "difficult": "hard"
    }
  ]
}
